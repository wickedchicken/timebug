{% extends "base.html" %}

{% block content %}
  <div ng-controller="trackcontroller">
    <div class="container-fluid">
      <div ng-hide="is_authorized">
      <div class="row-fluid">
        <button
          ng-click="handleAuthClick()">login!</button></div>
      </div>
      <div class="row-fluid" ng-show="is_authorized"><p>login = {{ '{{ username }}' }}</p>
        <button ng-click="logout()">log out</button>
      </div>
      <div class="row-fluid" ng-show-"is_authorized">
       <div id="chart_div" class="span4" style="width:400; height:300"></div>
       <div id="chart_div2" class="span4" style="width:400; height:300"></div>
       <table class="table">
       <tr><td>Task</td><td>Estimated Time</td><td>Actual Time</td><td></td></tr>
       <tr>
         <td><input type="text" ng-model="name" required ></td>
         <td><input type="number" ng-model="estimate" step="5" min="0" required ></td>
         <td><input type="number" ng-model="actual_mins" min="0"
           ng-change="update_actual()">m</td>
         <td><input type="number" ng-model="actual_secs" min="0"
           ng-change="update_actual()">s</td>
         <td><button ng-click="toggleTimer()">{{ '{{ buttontext }}' }}</button></td>
         <td><button ng-click="submit()">done</button></td>
       </tr>
      </table>
      <table class="table table-striped">
        <tr><td>Task</td><td>Estimated Time</td><td>Actual Time</td><td></td></tr>
        <tr ng-repeat="task in concattasks()">
          <td>{{ '{{task.name}}' }}</td>
          <td>{{ '{{task.estimate / 60 | number:0}}' }}m {{ '{{task.estimate % 60 | number:0}}s' }}</td>
          <td>{{ '{{task.actual / 60 | number:0}}' }}m {{ '{{task.actual % 60 | number:0}}s' }}</td>
        </tr>
      </table>
      </div>
    </div>
  </div>
{% endblock %}
